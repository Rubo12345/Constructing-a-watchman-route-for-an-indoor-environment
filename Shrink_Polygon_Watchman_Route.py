from typing import Final
import numpy as np
import matplotlib.pyplot as plt
import Shrink_Polygon_AGP

def shrink():
    SP = Shrink_Polygon_AGP

    # P = [(4,4),(8,4),(8,0),(14,-5),(20,0),(20,6),(15,6),(15,10),\
    #     (20,10),(20,14),(16,14),(16,16),(10,16),(10,14),(6,14),(6,16),(2,16)\
    #        ,(2,14),(0,14),(-5,7),(0,0),(2,-2),(4,0)]
    P = [(120,30),(80,80),(140,80),(90,110),(40,80),\
               (60,50),(20,85),(40,110),(5,110),(-20,75),(20,60),(-30,60),\
               (-20,30),(30,0),(40,20),(80,0),(140,0),(160,20),(150,80),(130,70)]

    # P = [(250,190),(236,192),(207,221),(227,241),(193,275)\
    #     ,(173,255),(155,272),(155,302),(164,302),(164,315)\
    #     ,(206,315),(206,337),(233,337),(233,311),(257,311)\
    #     ,(257,414),(167,414),(167,394),(100,394),(100,414)\
    #     ,(43,414),(43,394),(13,394),(13,313),(35,313)\
    #     ,(35,343),(62,343),(62,290),(47,290),(47,265)\
    #     ,(20,265),(20,286),(0,286),(0,211),(119,211),(124,216)\
    #     ,(168,172),(146,149),(164,131),(144,112),(126,130)\
    #     ,(90,94),(114,70),(114,48),(195,48),(195,92),(262,92)\
    #     ,(262,70),(320,70),(320,97),(365,97),(365,150)\
    #     ,(343,150),(343,128),(314,128),(314,192),(343,192)\
    #     ,(343,170),(374,170),(374,234),(343,234),(343,260)\
    #     ,(283,260),(283,242),(249,242)]
    P.reverse()   #already clockwise
    P.append(P[0])
    points = SP.shrink(P)
    points.append(points[0])
    Pb = SP.create_point_pair(P)
    Yx = SP.non_intersecting_diag(points,P,Pb)
    Yn = SP.mini_chk_pts(Pb,points,P,Yx)
    Final_Diagonals = SP.clean_up_final(Yn)
    Guards = SP.Guards(Final_Diagonals)
    print(f'These are the guards {Guards}')
    return Guards, P

